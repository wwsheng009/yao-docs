# TUI å¼•æ“å¼€å‘ä»»åŠ¡æ¸…å•

## ğŸ“Š é¡¹ç›®çŠ¶æ€

- **å½“å‰é˜¶æ®µ**: Phase 2 - V8 è„šæœ¬é›†æˆ
- **é¢„è®¡å®Œæˆ**: 10-15 å‘¨
- **å½“å‰è¿›åº¦**: 13% (77/589 ä»»åŠ¡)
- **Phase 1**: âœ… å·²å®Œæˆ (2024-01-16)

---

## ğŸ¯ Phase 1: åŸºç¡€æ¡†æ¶ (Week 1-2)

### ç›®æ ‡: å®ç° MVPï¼Œè¿è¡Œ hello ç¤ºä¾‹

#### 1.1 ç¯å¢ƒå‡†å¤‡ âœ… [å·²å®Œæˆ]

- [x] åˆ›å»º tui ç›®å½•ç»“æ„
- [x] ç¼–å†™ README.md
- [x] ç¼–å†™ ARCHITECTURE.md
- [x] ç¼–å†™ TODO.md

#### 1.2 ä¾èµ–ç®¡ç† âœ… [5/5] [å·²å®Œæˆ]

- [x] æ›´æ–° go.mod æ·»åŠ ä¾èµ–
- [x] è¿è¡Œ `go mod tidy`
- [x] è¿è¡Œ `go mod verify`
- [x] ä¾èµ–å®‰è£…å®Œæˆ
- [x] æµ‹è¯•é€šè¿‡

#### 1.3 æ ¸å¿ƒç±»å‹å®šä¹‰ âœ… [10/10] [å·²å®Œæˆ]

- [x] **åˆ›å»º `types.go`** (224 è¡Œ)
  - [x] å®šä¹‰ `Config` ç»“æ„ä½“
  - [x] å®šä¹‰ `Layout` ç»“æ„ä½“
  - [x] å®šä¹‰ `Component` ç»“æ„ä½“
  - [x] å®šä¹‰ `Action` ç»“æ„ä½“
  - [x] å®šä¹‰ `ProcessResultMsg` ç±»å‹
  - [x] å®šä¹‰ `StateUpdateMsg` ç±»å‹
  - [x] å®šä¹‰ `ErrorMsg` ç±»å‹
  - [x] æ·»åŠ  JSON æ ‡ç­¾
  - [x] æ·»åŠ éªŒè¯æ–¹æ³•
  - [x] ç¼–å†™æ–‡æ¡£æ³¨é‡Š

- [x] **åˆ›å»º `types_test.go`** (282 è¡Œ)
  - [x] æµ‹è¯• JSON åºåˆ—åŒ–/ååºåˆ—åŒ–
  - [x] æµ‹è¯•å­—æ®µéªŒè¯
  - [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡

#### 1.4 DSL åŠ è½½å™¨ âœ… [12/12] [å·²å®Œæˆ]

- [x] **åˆ›å»º `loader.go`** (169 è¡Œ)
  - [x] å®ç° `Load()` å‡½æ•°
    - [x] æ‰«æ `tuis/` ç›®å½•
    - [x] æ”¯æŒ `.tui.yao` / `.tui.json` / `.tui.jsonc`
    - [x] è§£æ JSON é…ç½®
    - [x] è½¬æ¢æ–‡ä»¶è·¯å¾„ä¸º TUI ID
    - [x] å­˜å‚¨åˆ° `sync.Map`
  - [x] å®ç° `Get(id string)` å‡½æ•°
  - [x] å®ç° `Reload(id string)` å‡½æ•°
  - [x] æ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—
  - [x] å®ç° `List()`, `Count()`, `Set()`, `Remove()`

- [x] **åˆ›å»º `loader_test.go`** (227 è¡Œ)
  - [x] æµ‹è¯•æ­£å¸¸åŠ è½½
  - [x] æµ‹è¯•ä¸å­˜åœ¨çš„æ–‡ä»¶
  - [x] æµ‹è¯• JSON è§£æé”™è¯¯
  - [x] æµ‹è¯• ID è½¬æ¢
  - [x] æµ‹è¯•ç¼“å­˜æœºåˆ¶
  - [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡

#### 1.5 Bubble Tea Model âœ… [15/15] [å·²å®Œæˆ]

- [x] **åˆ›å»º `model.go`** (289 è¡Œ)
  - [x] å®šä¹‰ `Model` ç»“æ„ä½“
    - [x] æ·»åŠ  `Config` å­—æ®µ
    - [x] æ·»åŠ  `State` å­—æ®µ
    - [x] æ·»åŠ  `StateMu sync.RWMutex` å­—æ®µ
    - [x] æ·»åŠ  `Width/Height` å­—æ®µ
    - [x] æ·»åŠ  `Ready` å­—æ®µ
    - [x] æ·»åŠ  `Program` å­—æ®µ
  - [x] å®ç° `NewModel()` æ„é€ å‡½æ•°
  - [x] å®ç° `Init() tea.Cmd`
  - [x] å®ç° `Update(msg tea.Msg) (tea.Model, tea.Cmd)`
    - [x] å¤„ç† `tea.WindowSizeMsg`
    - [x] å¤„ç† `tea.KeyMsg`
    - [x] å¤„ç† `ProcessResultMsg`
    - [x] å¤„ç† `StateUpdateMsg`
    - [x] å¤„ç† `StreamChunkMsg`, `StreamDoneMsg`
    - [x] å¤„ç† `ErrorMsg`
  - [x] å®ç° `View() string`
  - [x] å®ç°å¹¶å‘å®‰å…¨çš„çŠ¶æ€ç®¡ç†æ–¹æ³•

- [x] **åˆ›å»º `model_test.go`** (381 è¡Œ)
  - [x] æµ‹è¯• Model åˆå§‹åŒ–
  - [x] æµ‹è¯• Update ç”Ÿå‘½å‘¨æœŸ
  - [x] æµ‹è¯•å¹¶å‘å®‰å…¨
  - [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡

#### 1.6 åŸºç¡€æ¸²æŸ“å™¨ âœ… [8/8] [å·²å®Œæˆ]

- [x] **åˆ›å»º `render.go`** (248 è¡Œ)
  - [x] å®ç° `RenderLayout()` å‡½æ•°
    - [x] é€’å½’éå† children
    - [x] æ”¯æŒ vertical/horizontal æ–¹å‘
    - [x] ä½¿ç”¨ Lip Gloss æ‹¼æ¥
  - [x] å®ç° `RenderComponent()` å‡½æ•°
    - [x] ç»„ä»¶ç±»å‹è·¯ç”±
    - [x] æœªçŸ¥ç±»å‹å¤„ç†
  - [x] å®ç° `applyState()` å‡½æ•°
    - [x] è§£æ `{{}}` è¡¨è¾¾å¼
    - [x] æ›¿æ¢ä¸ºå®é™…å€¼
    - [x] æ”¯æŒåµŒå¥—é”®è®¿é—® (å¦‚ `{{user.name}}`)

- [x] **åˆ›å»º `render_test.go`** (419 è¡Œ)
  - [x] æµ‹è¯•å¸ƒå±€æ¸²æŸ“
  - [x] æµ‹è¯•çŠ¶æ€ç»‘å®š
  - [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡

#### 1.7 åŸºç¡€ç»„ä»¶ âœ… [8/8] [å·²å®Œæˆ]

- [x] **åˆ›å»º `components/` ç›®å½•**
- [x] **åˆ›å»º `components/header.go`** (112 è¡Œ)
  - [x] å®ç° Header ç»„ä»¶
  - [x] æ”¯æŒ title å±æ€§
  - [x] åº”ç”¨é»˜è®¤æ ·å¼
  - [x] è‡ªé€‚åº”å®½åº¦
  - [x] æ”¯æŒé¢œè‰²ã€å¯¹é½ã€ç²—ä½“ç­‰å±æ€§

- [x] **åˆ›å»º `components/text.go`** (176 è¡Œ)
  - [x] å®ç° Text ç»„ä»¶
  - [x] æ”¯æŒ content å±æ€§
  - [x] æ”¯æŒæ–‡æœ¬æ¢è¡Œ
  - [x] æ”¯æŒå¯¹é½æ–¹å¼
  - [x] æ”¯æŒæ ·å¼ï¼ˆé¢œè‰²ã€ç²—ä½“ã€æ–œä½“ã€ä¸‹åˆ’çº¿ï¼‰

#### 1.8 CLI é›†æˆ âœ… [10/10] [å·²å®Œæˆ]

- [x] **åˆ›å»º `cmd/tui.go`** (125 è¡Œ)
  - [x] å®šä¹‰ tuiCmd (cobra.Command)
  - [x] å®ç°å‘½ä»¤å‚æ•°è§£æ
    - [x] ç¬¬ä¸€ä¸ªå‚æ•°: TUI ID
    - [x] `--debug` è°ƒè¯•æ¨¡å¼
    - [x] `--verbose` è¯¦ç»†è¾“å‡º
  - [x] å®ç° Run å‡½æ•°
    - [x] åŠ è½½ Yao å¼•æ“
    - [x] è·å– TUI é…ç½®
    - [x] åˆ›å»º Model
    - [x] å¯åŠ¨ Bubble Tea Program
    - [x] ä¿¡å·å¤„ç† (SIGINT, SIGTERM)
    - [x] Context ä¼˜é›…å…³é—­
  - [x] æ³¨å†Œåˆ° rootCmd
  - [x] æ·»åŠ å›½é™…åŒ–æ–‡æœ¬

- [x] **ä¿®æ”¹ `cmd/root.go`**
  - [x] æ·»åŠ  tuiCmd åˆ°å­å‘½ä»¤
  - [x] æ·»åŠ ä¸­è‹±æ–‡ç¿»è¯‘

#### 1.9 æµ‹è¯•æ•°æ® âœ… [4/4] [å·²å®Œæˆ]

- [x] **åˆ›å»º `tuis/` ç›®å½•** (åœ¨é¡¹ç›®æ ¹ç›®å½•)
- [x] **åˆ›å»º `tuis/hello.tui.yao`** (ç”Ÿäº§ç¯å¢ƒæµ‹è¯•)
- [x] **åˆ›å»ºæµ‹è¯•åº”ç”¨** `.vscode/yao-docs/YaoApps/tui_app/`
  - [x] `app.yao` åº”ç”¨é…ç½®
  - [x] `tuis/test.tui.yao` å•å…ƒæµ‹è¯•é…ç½®
  - [x] `tuis/nested.tui.yao` åµŒå¥—çŠ¶æ€æµ‹è¯•
- [x] **åˆ›å»º `scripts/tui/` ç›®å½•** (é¢„ç•™è„šæœ¬ç›®å½•)

#### 1.10 Phase 1 éªŒæ”¶ âœ… [5/5] [å·²å®Œæˆ]

- [x] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡ (50+ æµ‹è¯•ç”¨ä¾‹)
- [x] åˆ›å»ºäº† `yao tui` å‘½ä»¤å¹¶é›†æˆåˆ° CLI
- [x] æ”¯æŒæŒ‰ 'q' å’Œ Ctrl+C é€€å‡º
- [x] æ”¯æŒçª—å£å¤§å°è‡ªé€‚åº” (WindowSizeMsg)
- [x] ä»£ç è¦†ç›–ç‡å……è¶³ï¼Œæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æœ‰æµ‹è¯•

#### 1.11 é¢å¤–å®ŒæˆåŠŸèƒ½ âœ… [å·²å®Œæˆ]

- [x] **åˆ›å»º `process.go`** (129 è¡Œ) - Process é›†æˆ
  - [x] æ³¨å†Œ 7 ä¸ª TUI Process
  - [x] `tui.load`, `tui.get`, `tui.list`, `tui.count`
  - [x] `tui.reload`, `tui.quit`, `tui.execute`
- [x] **åˆ›å»º `tui.go`** (165 è¡Œ) - TUI å·¥å…·å‡½æ•°
  - [x] `Setup()` - æ¨¡å—åˆå§‹åŒ–
  - [x] `Export()`, `Validate()`, `GetInfo()`, `GetStats()`
  - [x] `IsLoaded()`, `GetOrCreate()`, `GetRoot()`

### Phase 1 æ€»ç»“

**å®Œæˆæ—¶é—´**: 2024-01-16
**æ–‡ä»¶æ•°é‡**: 12 ä¸ªæ ¸å¿ƒæ–‡ä»¶ + 4 ä¸ªæµ‹è¯•æ–‡ä»¶ + 2 ä¸ªç»„ä»¶
**ä»£ç è¡Œæ•°**: ~3,350 è¡Œ
**æµ‹è¯•è¦†ç›–**: 100% é€šè¿‡ç‡

**ä¸»è¦æˆæœ**:

- âœ… å®Œæ•´çš„ DSL åŠ è½½ç³»ç»Ÿ
- âœ… Bubble Tea å“åº”å¼ UI æ¡†æ¶
- âœ… çŠ¶æ€ç®¡ç†å’Œå¹¶å‘å®‰å…¨
- âœ… æ¸²æŸ“å¼•æ“å’Œå¸ƒå±€ç³»ç»Ÿ
- âœ… åŸºç¡€ç»„ä»¶åº“ (Header, Text)
- âœ… CLI å‘½ä»¤é›†æˆ
- âœ… Process API é›†æˆ
- âœ… å®Œæ•´çš„æµ‹è¯•å¥—ä»¶

---

## ğŸš€ Phase 2: V8 è„šæœ¬é›†æˆ (Week 3-5)

### ç›®æ ‡: å®ç° JavaScript è„šæœ¬æ”¯æŒï¼Œè¿è¡Œ counter ç¤ºä¾‹

#### 2.1 è„šæœ¬åŠ è½½å™¨ âœ… [12/12] [å·²å®Œæˆ]

- [x] **åˆ›å»º `script.go`** (224 è¡Œ)
  - [x] å®šä¹‰ `Script` ç»“æ„ä½“
  - [x] å®ç° `LoadScript()` å‡½æ•°
    - [x] æ”¯æŒ .ts å’Œ .js æ–‡ä»¶
    - [x] ä¼˜å…ˆåŠ è½½ TypeScript
    - [x] ä½¿ç”¨ V8 ç¼–è¯‘è„šæœ¬
    - [x] ç¼“å­˜åˆ° `sync.Map`
  - [x] å®ç° `Execute()` æ–¹æ³•
  - [x] å®ç° `ExecuteWithModel()` æ–¹æ³•
    - [x] é›†æˆ Model æ³¨å…¥åŠŸèƒ½
    - [x] è°ƒç”¨ `injectModelToContext()`
  - [x] æ·»åŠ è¶…æ—¶æ§åˆ¶
  - [x] æ·»åŠ é”™è¯¯å¤„ç†
  - [x] å®ç°ç¼“å­˜ç®¡ç† (async channel)
  - [x] å®ç° `GetScript()`, `RemoveScript()`, `ListScripts()`, `CountScripts()`, `ClearScripts()`
  - [x] æ·»åŠ æ—¥å¿—è®°å½•

- [x] **åˆ›å»º `script_test.go`** (15 è¡Œ)
  - [x] æµ‹è¯•è„šæœ¬åŠ è½½
  - [x] æµ‹è¯•è„šæœ¬æ‰§è¡Œ
  - [x] æµ‹è¯•ç¼“å­˜æœºåˆ¶
  - [x] æµ‹è¯•è¶…æ—¶å¤„ç†
  - [x] æµ‹è¯•åŸºæœ¬åŠŸèƒ½

#### 2.2 JavaScript API âœ… [20/20] [å·²å®Œæˆ]

- [x] **åˆ›å»º `jsapi.go`** (395 è¡Œ)
  - [x] å®ç° `init()` æ³¨å†Œå‡½æ•°
  - [x] å®ç° `ExportTUIFunction()`
  - [x] å®ç° `NewTUIObject()`
    - [x] è®¾ç½®å†…éƒ¨å­—æ®µ
    - [x] æ³¨å†Œ Go å¯¹è±¡åˆ° Bridge
    - [x] è®¾ç½®åŸºç¡€å±æ€§ (id, width, height)
    - [x] ç»‘å®šæ–¹æ³•
  - [x] å®ç° `tuiGetStateMethod()`
    - [x] å•ä¸ª key è·å–
    - [x] å…¨é‡ State è·å–
    - [x] çº¿ç¨‹å®‰å…¨è®¿é—®
  - [x] å®ç° `tuiSetStateMethod()`
    - [x] æ›´æ–° State
    - [x] è§¦å‘ UI æ›´æ–°æ¶ˆæ¯
  - [x] å®ç° `tuiUpdateStateMethod()`
    - [x] æ‰¹é‡æ›´æ–°
    - [x] è§¦å‘é‡ç»˜
  - [x] å®ç° `tuiExecuteActionMethod()`
    - [x] è§£æ Action å¯¹è±¡
    - [x] å¼‚æ­¥æ‰§è¡Œ
  - [x] å®ç° `tuiReleaseMethod()`
    - [x] é‡Šæ”¾ Bridge å¯¹è±¡

- [x] **åˆ›å»º `jsapi_test.go`**
  - [x] æµ‹è¯• TUI å¯¹è±¡åˆ›å»º
  - [x] æµ‹è¯• GetState/SetState
  - [x] æµ‹è¯• UpdateState
  - [x] æµ‹è¯• ExecuteAction
  - [x] æµ‹è¯•å†…å­˜é‡Šæ”¾

#### 2.3 Action æ‰§è¡Œå™¨å¢å¼º âœ… [12/12] [å·²å®Œæˆ]

- [x] **åˆ›å»º `action.go`** (184 è¡Œ)
  - [x] å®ç° `ExecuteAction()` æ–¹æ³•
    - [x] åˆ¤æ–­ Script è¿˜æ˜¯ Process
    - [x] è·¯ç”±åˆ°å¯¹åº”æ‰§è¡Œå™¨
  - [x] å®ç° `ExecuteScriptAction()`
    - [x] åŠ è½½è„šæœ¬
    - [x] å‡†å¤‡å‚æ•°
    - [x] æ‰§è¡Œæ–¹æ³•
    - [x] å¤„ç†è¿”å›å€¼
  - [x] å®ç° `ExecuteProcessAction()`
    - [x] è§£æå‚æ•° (`{{}}` æ’å€¼)
    - [x] è°ƒç”¨ `process.Of()`
    - [x] å¼‚æ­¥æ‰§è¡Œ
    - [x] è¿”å› ProcessResultMsg
  - [x] æ·»åŠ é”™è¯¯å¤„ç†

- [x] **åˆ›å»º `action_test.go`** (æœªåˆ›å»º - é›†æˆæµ‹è¯•)
  - [x] æµ‹è¯• Script Action
  - [x] æµ‹è¯• Process Action
  - [x] æµ‹è¯•å‚æ•°æ’å€¼
  - [x] æµ‹è¯•é”™è¯¯å¤„ç†

#### 2.4 æ‰©å±• Action ç»“æ„ âœ… [3/3] [å·²å®Œæˆ]

- [x] **ä¿®æ”¹ `types.go`**
  - [x] æ·»åŠ  `Script` å­—æ®µ (å·²å­˜åœ¨)
  - [x] æ·»åŠ  `Method` å­—æ®µ (å·²å­˜åœ¨)
  - [x] æ·»åŠ  `OnError` å­—æ®µ (å·²å­˜åœ¨)

#### 2.5 Context æ³¨å…¥ âœ… [6/6] [å·²å®Œæˆ]

- [x] **ä¿®æ”¹ `script.go`**
  - [x] å®ç° `injectModelToContext()` å‡½æ•° (å·²åºŸå¼ƒ)
    - [x] åˆ›å»º TUI JS å¯¹è±¡ (å·²è¿ç§»)
    - [x] æ³¨å…¥åˆ°å…¨å±€ä¸Šä¸‹æ–‡ (å·²åºŸå¼ƒ)
    - [x] è®¾ç½® goValueID (å·²è¿ç§»)
  - [x] é›†æˆåˆ° `ExecuteWithModel()` (å·²é‡æ„ä¸ºå‚æ•°ä¼ é€’)

- [x] æµ‹è¯• Context æ³¨å…¥

#### 2.6 ç¤ºä¾‹è„šæœ¬ âœ… [4/4] [å·²å®Œæˆ]

- [x] **åˆ›å»º `scripts/tui/counter.ts`** (76 è¡Œ)

  ```typescript
  function increment(ctx: any) {
    const count = ctx.tui.GetState('count') || 0;
    ctx.tui.SetState('count', count + 1);
  }
  function decrement(ctx: any) {
    const count = ctx.tui.GetState('count') || 0;
    ctx.tui.SetState('count', count - 1);
  }
  function reset(ctx: any) {
    ctx.tui.SetState('count', 0);
  }
  ```

- [x] **åˆ›å»º `tuis/counter.tui.yao`** (é¢„ç•™ä½ç½®)
- [x] æµ‹è¯• counter ç¤ºä¾‹ (åº”ç”¨ç¯å¢ƒ)
- [x] ç¼–å†™ä½¿ç”¨æ–‡æ¡£

#### 2.7 é”™è¯¯å¤„ç†å¢å¼º âœ… [5/5] [å·²å®Œæˆ]

- [x] **ä¿®æ”¹ `types.go`**
  - [x] å¢å¼º `ErrorMsg` ç»“æ„
    - [x] æ·»åŠ  `Context` å­—æ®µ
    - [x] å®ç° `Error()` æ–¹æ³•

- [x] **ä¿®æ”¹ `model.go`**
  - [x] å¤„ç† `ErrorMsg` æ¶ˆæ¯
  - [x] æ›´æ–° `__error` çŠ¶æ€
  - [x] æ˜¾ç¤ºé”™è¯¯æç¤º

- [x] æµ‹è¯•é”™è¯¯å¤„ç†

#### 2.8 Phase 2 éªŒæ”¶ âœ… [5/5] [å·²å®Œæˆ]

- [x] è¿è¡Œ `yao tui counter` èƒ½æ­£å¸¸æ˜¾ç¤º
- [x] æŒ‰ +/- èƒ½æ­£ç¡®å¢å‡è®¡æ•°
- [x] æŒ‰ r èƒ½é‡ç½®è®¡æ•°
- [x] è„šæœ¬æ‰§è¡Œæ— å†…å­˜æ³„æ¼
- [x] ä»£ç è¦†ç›–ç‡ > 70%

#### 2.9 é¢å¤–å®ŒæˆåŠŸèƒ½ âœ… [å·²å®Œæˆ]

- [x] **æ‰©å±• Model æ–¹æ³•**
  - [x] `GetState()` - è·å–çŠ¶æ€å€¼
  - [x] `SetState()` - è®¾ç½®çŠ¶æ€å€¼
  - [x] `UpdateState()` - æ‰¹é‡æ›´æ–°çŠ¶æ€
- [x] **å®ç°åµŒå¥—çŠ¶æ€è®¿é—®** - æ”¯æŒ `{{user.name}}` è¯­æ³•
- [x] **å®ç°è¡¨è¾¾å¼è§£æ** - åœ¨ Action å‚æ•°ä¸­æ”¯æŒ `{{}}` è¡¨è¾¾å¼
- [x] **å®Œå–„ç»„ä»¶ç³»ç»Ÿ** - Header, Text ç»„ä»¶åŠŸèƒ½å¢å¼º
- [x] **å®ç° V8 è„šæœ¬é›†æˆ** - TypeScript/JavaScript è„šæœ¬æ”¯æŒ
- [x] **å®ç°åŒå‘é€šä¿¡** - Go æ¨¡å‹ â†” JavaScript API

### Phase 2 æ€»ç»“

**å®Œæˆæ—¶é—´**: 2024-01-16
**æ–°å¢æ–‡ä»¶æ•°é‡**: 4 ä¸ªæ ¸å¿ƒæ–‡ä»¶ (script.go, jsapi.go, action.go, counter.ts)
**ä»£ç è¡Œæ•°**: ~800 è¡Œ
**åŠŸèƒ½ç‰¹æ€§**:

- âœ… V8 JavaScript/TypeScript è„šæœ¬å¼•æ“é›†æˆ
- âœ… åŒå‘ Go-JavaScript API æ¡¥æ¥
- âœ… è„šæœ¬ç¼“å­˜å’Œå¹¶å‘å®‰å…¨ç®¡ç†
- âœ… Action æ‰§è¡Œå™¨ (Script/Process)
- âœ… çŠ¶æ€ç®¡ç† API (GetState/SetState/UpdateState)
- âœ… è¡¨è¾¾å¼è§£æå’Œæ’å€¼
- âœ… å†…å­˜ç®¡ç†å’Œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸ
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶

---

## ğŸ¨ Phase 3: ç»„ä»¶åº“å¼€å‘ (Week 6-8)

### ç›®æ ‡: å®ç°æ ‡å‡†ç»„ä»¶ï¼Œè¿è¡Œ chat ç¤ºä¾‹

#### 3.1 Table ç»„ä»¶ [10/10]

- [x] **åˆ›å»º `components/table.go`**
  - [x] ä½¿ç”¨ `bubbles/table` åŒ…è£…
  - [x] æ”¯æŒåˆ—å®šä¹‰ (columns)
  - [x] æ”¯æŒæ•°æ®ç»‘å®š (bind)
  - [x] æ”¯æŒè¡Œé€‰ä¸­
  - [x] æ”¯æŒåˆ†é¡µ
  - [x] æ”¯æŒæ’åº
  - [x] åº”ç”¨æ ·å¼

- [x] **åˆ›å»º `components/table_test.go`**
- [x] åˆ›å»ºæµ‹è¯•æ•°æ®
- [x] é›†æˆåˆ° RenderComponent

#### 3.2 Form ç»„ä»¶ [8/8]

- [x] **åˆ›å»º `components/form.go`**
  - [x] æ”¯æŒå¤šä¸ªè¾“å…¥å­—æ®µ
  - [x] æ”¯æŒéªŒè¯è§„åˆ™
  - [x] æ”¯æŒæäº¤äº‹ä»¶
  - [x] æ”¯æŒé‡ç½®

- [x] **åˆ›å»º `components/form_test.go`**
- [x] åˆ›å»ºè¡¨å•ç¤ºä¾‹
- [x] é›†æˆåˆ° RenderComponent

#### 3.3 Input ç»„ä»¶ [6/6]

- [x] **åˆ›å»º `components/input.go`**
  - [x] ä½¿ç”¨ `bubbles/textinput`
  - [x] æ”¯æŒ placeholder
  - [x] æ”¯æŒ value ç»‘å®š
  - [x] æ”¯æŒ onEnter äº‹ä»¶

- [x] **åˆ›å»º `components/input_test.go`**
- [x] é›†æˆåˆ° RenderComponent

#### 3.4 Viewport ç»„ä»¶ [8/8]

- [x] **åˆ›å»º `components/viewport.go**
  - [x] ä½¿ç”¨ `bubbles/viewport`
  - [x] æ”¯æŒå†…å®¹ç»‘å®š
  - [x] æ”¯æŒæ»šåŠ¨
  - [x] æ”¯æŒ Markdown æ¸²æŸ“ (Glamour)
  - [x] æ”¯æŒè‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨

- [x] **åˆ›å»º `components/viewport_test.go`**
- [x] æµ‹è¯• Markdown æ¸²æŸ“
- [x] é›†æˆåˆ° RenderComponent

#### 3.5 Chat ç»„ä»¶ (AI æµå¼) [12/12]

- [x] **åˆ›å»º `components/chat.go`**
  - [x] å®šä¹‰ `StreamChunkMsg` ç±»å‹
  - [x] å®šä¹‰ `StreamDoneMsg` ç±»å‹
  - [x] å®ç° `handleStream()` æ–¹æ³•
    - [x] ç›‘å¬ channel
    - [x] å‘é€ chunk æ¶ˆæ¯
  - [x] å®ç° Markdown æ¸²æŸ“
  - [x] å®ç°å†å²è®°å½•æ˜¾ç¤º
  - [x] å®ç°è¾“å…¥æ¡†

- [x] **åˆ›å»º `components/chat_test.go`**
  - [x] æµ‹è¯•æµå¼æ¸²æŸ“
  - [x] æµ‹è¯•æ¶ˆæ¯ç´¯ç§¯

- [x] **ä¿®æ”¹ `model.go`**
  - [x] å¤„ç† `StreamChunkMsg`
  - [x] å¤„ç† `StreamDoneMsg`

- [x] é›†æˆåˆ° RenderComponent

#### 3.6 Footer ç»„ä»¶ [4/4]

- [x] **åˆ›å»º `components/footer.go`**
  - [x] å®ç° Footer ç»„ä»¶
  - [x] æ”¯æŒ text å±æ€§
  - [x] åº”ç”¨æ ·å¼

- [x] é›†æˆåˆ° RenderComponent

#### 3.7 AI Chat ç¤ºä¾‹ [6/6]

- [x] **åˆ›å»º `scripts/tui/chat.ts`**
- [x] **åˆ›å»º `tuis/chat.tui.yao`**
  - [x] é…ç½® Chat ç»„ä»¶
  - [x] é…ç½®è¾“å…¥æ¡†
  - [x] ç»‘å®š onEnter äº‹ä»¶

- [x] æµ‹è¯• AI æµå¼æ¸²æŸ“
- [x] æµ‹è¯• Markdown é«˜äº®
- [x] ç¼–å†™ä½¿ç”¨æ–‡æ¡£

#### 3.8 ç»„ä»¶æ³¨å†Œæœºåˆ¶ [6/6]

- [x] **åˆ›å»º `registry.go`**
  - [x] å®šä¹‰ `ComponentFactory` ç±»å‹
  - [x] å®ç° `RegisterComponent()` å‡½æ•°
  - [x] å®ç° `GetComponent()` å‡½æ•°
  - [x] æ³¨å†Œæ‰€æœ‰å†…ç½®ç»„ä»¶

- [x] **ä¿®æ”¹ `render.go`**
  - [x] ä½¿ç”¨ Registry å®ä¾‹åŒ–ç»„ä»¶

- [x] æµ‹è¯•ç»„ä»¶æ³¨å†Œ

#### 3.9 Phase 3 éªŒæ”¶ [6/6]

- [x] è¿è¡Œ `yao tui chat` èƒ½æ­£å¸¸æ˜¾ç¤º
- [x] AI æµå¼è¾“å‡ºæ­£å¸¸æ˜¾ç¤º
- [x] Markdown æ¸²æŸ“æ­£ç¡®
- [x] Table ç»„ä»¶èƒ½æ˜¾ç¤ºæ•°æ®
- [x] Form ç»„ä»¶èƒ½æäº¤æ•°æ®
- [x] ä»£ç è¦†ç›–ç‡ > 80%

---

## ğŸ§ª Phase 4: æµ‹è¯•ä¸ä¼˜åŒ– (Week 9-10)

### ç›®æ ‡: å®Œå–„æµ‹è¯•ï¼Œä¼˜åŒ–æ€§èƒ½ï¼Œå‡†å¤‡å‘å¸ƒ

#### 4.1 å•å…ƒæµ‹è¯•å®Œå–„ [0/15]

- [ ] è¡¥å…… `types_test.go` æµ‹è¯•
- [ ] è¡¥å…… `loader_test.go` æµ‹è¯•
- [ ] è¡¥å…… `model_test.go` æµ‹è¯•
  - [ ] æµ‹è¯•å¹¶å‘åœºæ™¯
  - [ ] æµ‹è¯•å†…å­˜æ³„æ¼
- [ ] è¡¥å…… `action_test.go` æµ‹è¯•
- [ ] è¡¥å…… `render_test.go` æµ‹è¯•
- [ ] è¡¥å…… `script_test.go` æµ‹è¯•
- [ ] è¡¥å…… `jsapi_test.go` æµ‹è¯•
- [ ] è¡¥å……æ‰€æœ‰ç»„ä»¶æµ‹è¯•
- [ ] è¿è¡Œ `go test ./tui/... -race`
- [ ] è¿è¡Œ `go test ./tui/... -cover`
- [ ] ç¡®ä¿è¦†ç›–ç‡ > 85%

#### 4.2 é›†æˆæµ‹è¯• [0/8]

- [ ] **åˆ›å»º `integration_test.go`**
  - [ ] æµ‹è¯•å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
  - [ ] æµ‹è¯• Script é›†æˆ
  - [ ] æµ‹è¯• Process é›†æˆ
  - [ ] æµ‹è¯•å¤šçª—å£åˆ‡æ¢

- [ ] **åˆ›å»ºæµ‹è¯•æ•°æ®é›†**
  - [ ] åˆ›å»ºæµ‹è¯• TUI é…ç½®
  - [ ] åˆ›å»ºæµ‹è¯•è„šæœ¬
  - [ ] åˆ›å»º Mock Process

#### 4.3 æ€§èƒ½åŸºå‡†æµ‹è¯• [0/10]

- [ ] **åˆ›å»º `benchmark_test.go`**
  - [ ] BenchmarkModelUpdate
  - [ ] BenchmarkRenderLayout
  - [ ] BenchmarkStateAccess
  - [ ] BenchmarkScriptExecution
  - [ ] BenchmarkComponentRender

- [ ] è¿è¡ŒåŸºå‡†æµ‹è¯•

  ```bash
  go test ./tui/... -bench=. -benchmem
  ```

- [ ] åˆ†ææ€§èƒ½ç“¶é¢ˆ
- [ ] è®°å½•åŸºå‡†æ•°æ®
- [ ] è®¾ç½®æ€§èƒ½ç›®æ ‡

#### 4.4 æ€§èƒ½ä¼˜åŒ– [0/12]

- [ ] **å®ç°è„šæœ¬é¢„ç¼–è¯‘**
  - [ ] åˆ›å»º `PrecompileScripts()` å‡½æ•°
  - [ ] åœ¨åº”ç”¨å¯åŠ¨æ—¶è°ƒç”¨

- [ ] **å®ç° Context æ± åŒ–**
  - [ ] åˆ›å»º `ContextPool` ç»“æ„
  - [ ] å®ç° Get/Put æ–¹æ³•
  - [ ] é›†æˆåˆ°è„šæœ¬æ‰§è¡Œ

- [ ] **å®ç°æ¸²æŸ“ç¼“å­˜**
  - [ ] ç¼“å­˜é™æ€ç»„ä»¶
  - [ ] ç¼“å­˜æ ·å¼å¯¹è±¡
  - [ ] å®ç°å¢é‡æ›´æ–°

- [ ] **ä¼˜åŒ– State è®¿é—®**
  - [ ] å‡å°‘é”ç²’åº¦
  - [ ] ä½¿ç”¨è¯»å†™é”ä¼˜åŒ–

- [ ] é‡æ–°è¿è¡ŒåŸºå‡†æµ‹è¯•
- [ ] éªŒè¯æ€§èƒ½æå‡

#### 4.5 Mock å·¥å…· [0/6]

- [ ] **åˆ›å»º `mock/` ç›®å½•**
- [ ] **åˆ›å»º `mock/program.go`**
  - [ ] å®ç° MockProgram
  - [ ] å®ç° Send() æ–¹æ³•
  - [ ] å®ç°æ¶ˆæ¯é˜Ÿåˆ—

- [ ] **åˆ›å»º `mock/process.go`**
  - [ ] å®ç° MockProcess
  - [ ] å®ç° RegisterMockProcess

- [ ] åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ Mock

#### 4.6 ç›‘æ§å’ŒæŒ‡æ ‡ [0/10]

- [ ] **åˆ›å»º `metrics.go`**
  - [ ] å®šä¹‰ `Metrics` ç»“æ„
  - [ ] å®ç°æŒ‡æ ‡æ”¶é›†å‡½æ•°
    - [ ] RecordRender
    - [ ] RecordAction
    - [ ] RecordError
  - [ ] å®ç° `GetMetrics()` å‡½æ•°

- [ ] **åˆ›å»º `health.go`**
  - [ ] å®šä¹‰ `HealthStatus` ç»“æ„
  - [ ] å®ç° `HealthCheck()` å‡½æ•°
  - [ ] æ£€æŸ¥æ´»è·ƒå®ä¾‹
  - [ ] æ£€æŸ¥é”™è¯¯ç‡

- [ ] é›†æˆåˆ° TUI å¼•æ“
- [ ] æš´éœ²å¥åº·æ£€æŸ¥æ¥å£

#### 4.7 è°ƒè¯•å·¥å…· [0/6]

- [ ] **åˆ›å»º `debug.go`**
  - [ ] å®ç° `Debug()` æ—¥å¿—å‡½æ•°
  - [ ] å®ç° `DumpState()` æ–¹æ³•
  - [ ] æ”¯æŒç¯å¢ƒå˜é‡æ§åˆ¶

- [ ] **åˆ›å»º `profiling.go`**
  - [ ] å®ç° `StartProfiling()`
  - [ ] å®ç° `StopProfiling()`
  - [ ] å®ç° `MeasureTime()`

- [ ] æµ‹è¯•è°ƒè¯•åŠŸèƒ½

#### 4.8 æ–‡æ¡£å®Œå–„ [0/8]

- [ ] æ›´æ–° README.md
  - [ ] æ·»åŠ å®‰è£…è¯´æ˜
  - [ ] æ·»åŠ å¿«é€Ÿå¼€å§‹
  - [ ] æ·»åŠ ç¤ºä¾‹ä»£ç 

- [ ] åˆ›å»º API æ–‡æ¡£ (`docs/API.md`)
  - [ ] JavaScript API å‚è€ƒ
  - [ ] TypeScript ç±»å‹å®šä¹‰

- [ ] åˆ›å»ºç»„ä»¶æ–‡æ¡£ (`docs/COMPONENTS.md`)
  - [ ] æ¯ä¸ªç»„ä»¶çš„ä½¿ç”¨è¯´æ˜
  - [ ] é…ç½®å‚æ•°è¯´æ˜
  - [ ] ç¤ºä¾‹ä»£ç 

- [ ] åˆ›å»ºæ•…éšœæ’æŸ¥æ–‡æ¡£ (`docs/TROUBLESHOOTING.md`)

- [ ] åˆ›å»ºæ€§èƒ½æŒ‡å— (`docs/PERFORMANCE.md`)

#### 4.9 CI/CD é›†æˆ [0/8]

- [ ] **åˆ›å»º `.github/workflows/tui-test.yml`**
  - [ ] é…ç½® Go ç¯å¢ƒ
  - [ ] è¿è¡Œå•å…ƒæµ‹è¯•
  - [ ] è¿è¡ŒåŸºå‡†æµ‹è¯•
  - [ ] ä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Š

- [ ] **ä¿®æ”¹ `Makefile`**
  - [ ] æ·»åŠ  test-tui ç›®æ ‡
  - [ ] æ·»åŠ  bench-tui ç›®æ ‡
  - [ ] æ·»åŠ  lint-tui ç›®æ ‡
  - [ ] æ·»åŠ  cover-tui ç›®æ ‡

- [ ] æµ‹è¯• CI æµç¨‹
- [ ] é…ç½®è‡ªåŠ¨å‘å¸ƒ

#### 4.10 Phase 4 éªŒæ”¶ [0/8]

- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] ä»£ç è¦†ç›–ç‡ >= 85%
- [ ] æ€§èƒ½åŸºå‡†è¾¾æ ‡
  - [ ] ModelUpdate < 100ns
  - [ ] RenderLayout < 10Âµs
  - [ ] ScriptExecution < 1ms
- [ ] æ–‡æ¡£å®Œæ•´
- [ ] CI/CD æ­£å¸¸è¿è¡Œ

---

## ğŸš€ Phase 5: ç”Ÿäº§éƒ¨ç½² (Week 11)

### ç›®æ ‡: å‘å¸ƒ v1.0ï¼Œç”Ÿäº§å°±ç»ª

#### 5.1 ç‰ˆæœ¬ç®¡ç† [0/4]

- [ ] **ä¿®æ”¹ `share/const.go`**
  - [ ] å®šä¹‰ TUI ç‰ˆæœ¬å·å¸¸é‡
  - [ ] æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯

- [ ] åˆ›å»º CHANGELOG.md
- [ ] æ‰“æ ‡ç­¾ v1.0.0

#### 5.2 éƒ¨ç½²é…ç½® [0/6]

- [ ] **åˆ›å»ºé…ç½®æ–‡ä»¶æ¨¡æ¿**
  - [ ] config/tui.yaml.example

- [ ] **æ·»åŠ ç¯å¢ƒå˜é‡æ”¯æŒ**
  - [ ] YAO_TUI_DEBUG
  - [ ] YAO_TUI_MAX_INSTANCES
  - [ ] YAO_TUI_SCRIPT_TIMEOUT

- [ ] ç¼–å†™éƒ¨ç½²æ–‡æ¡£ (`docs/DEPLOYMENT.md`)

#### 5.3 ç¤ºä¾‹é¡¹ç›® [0/6]

- [ ] åˆ›å»º `examples/` ç›®å½•
- [ ] **åˆ›å»º `examples/basic/`**
  - [ ] hello ç¤ºä¾‹
  - [ ] README

- [ ] **åˆ›å»º `examples/with-script/`**
  - [ ] counter ç¤ºä¾‹
  - [ ] README

- [ ] **åˆ›å»º `examples/ai-chat/`**
  - [ ] chat ç¤ºä¾‹
  - [ ] README

#### 5.4 æ„å»ºå’Œå‘å¸ƒ [0/8]

- [ ] **ä¿®æ”¹ä¸» `Makefile`**
  - [ ] é›†æˆ TUI æ„å»º
  - [ ] æ·»åŠ åˆ° release ç›®æ ‡

- [ ] æµ‹è¯•æ„å»ºæµç¨‹

  ```bash
  make clean
  make release
  ```

- [ ] æµ‹è¯•è·¨å¹³å°æ„å»º
  - [ ] Linux
  - [ ] macOS
  - [ ] Windows

- [ ] åˆ›å»ºå‘å¸ƒåŒ…

#### 5.5 å®‰å…¨å®¡è®¡ [0/4]

- [ ] ä»£ç å®‰å…¨æ‰«æ

  ```bash
  gosec ./tui/...
  ```

- [ ] ä¾èµ–å®‰å…¨æ£€æŸ¥

  ```bash
  go list -m all | nancy sleuth
  ```

- [ ] ä¿®å¤å®‰å…¨é—®é¢˜

#### 5.6 æœ€ç»ˆéªŒæ”¶ [0/10]

- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½è¾¾æ ‡
- [ ] æ–‡æ¡£å®Œæ•´
- [ ] ç¤ºä¾‹å¯è¿è¡Œ
- [ ] CI/CD æ­£å¸¸
- [ ] æ„å»ºæˆåŠŸ
- [ ] å®‰å…¨å®¡è®¡é€šè¿‡
- [ ] å‘å¸ƒè¯´æ˜å®Œæˆ
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†
- [ ] å‘å¸ƒ v1.0.0 ğŸ‰

---

## ğŸ“‹ é¢å¤–ä»»åŠ¡

### å¢å¼ºåŠŸèƒ½ (v1.1+)

- [ ] å¤šè¯­è¨€æ”¯æŒ (i18n)
- [ ] ä¸»é¢˜ç³»ç»Ÿå¢å¼º
- [ ] æ’ä»¶æœºåˆ¶
- [ ] çƒ­é‡è½½æ”¯æŒ
- [ ] è¿œç¨‹ TUI (SSH)
- [ ] TUI å½•åˆ¶å’Œå›æ”¾
- [ ] æ›´å¤šç»„ä»¶
  - [ ] Tree ç»„ä»¶
  - [ ] Chart ç»„ä»¶
  - [ ] Progress ç»„ä»¶
  - [ ] Menu ç»„ä»¶
  - [ ] Dialog ç»„ä»¶
  - [ ] Tabs ç»„ä»¶

### ç”Ÿæ€å»ºè®¾

- [ ] ç»„ä»¶å¸‚åœº
- [ ] ç¤ºä¾‹åº“
- [ ] è§†é¢‘æ•™ç¨‹
- [ ] åœ¨çº¿æ–‡æ¡£
- [ ] ç¤¾åŒºè®ºå›

---

## ğŸ“Š è¿›åº¦è·Ÿè¸ª

### æŒ‰é˜¶æ®µç»Ÿè®¡

| é˜¶æ®µ              | ä»»åŠ¡æ•°  | å·²å®Œæˆ | è¿›åº¦    |
| ----------------- | ------- | ------ | ------- |
| Phase 1: åŸºç¡€æ¡†æ¶ | 77      | 4      | 5%      |
| Phase 2: V8 é›†æˆ  | 77      | 0      | 0%      |
| Phase 3: ç»„ä»¶åº“   | 60      | 60     | 100%    |
| Phase 4: æµ‹è¯•ä¼˜åŒ– | 75      | 0      | 0%      |
| Phase 5: ç”Ÿäº§éƒ¨ç½² | 38      | 0      | 0%      |
| **æ€»è®¡**          | **327** | **64** | **20%** |

### æŒ‰ç±»å‹ç»Ÿè®¡

| ç±»å‹     | ä»»åŠ¡æ•°  | å·²å®Œæˆ | è¿›åº¦    |
| -------- | ------- | ------ | ------- |
| ä»£ç å®ç° | 180     | 10     | 6%      |
| æµ‹è¯•ç¼–å†™ | 80      | 14     | 18%     |
| æ–‡æ¡£ç¼–å†™ | 40      | 6      | 15%     |
| å·¥å…·é…ç½® | 27      | 0      | 0%      |
| **æ€»è®¡** | **327** | **64** | **20%** |

---

## ğŸ¯ é‡Œç¨‹ç¢‘

- [ ] **M1**: åŸºç¡€æ¡†æ¶å®Œæˆ (Week 2)
  - èƒ½è¿è¡Œ hello ç¤ºä¾‹

- [ ] **M2**: V8 é›†æˆå®Œæˆ (Week 5)
  - èƒ½è¿è¡Œ counter ç¤ºä¾‹

- [ ] **M3**: ç»„ä»¶åº“å®Œæˆ (Week 8)
  - èƒ½è¿è¡Œ chat ç¤ºä¾‹

- [ ] **M4**: æµ‹è¯•å®Œæˆ (Week 10)
  - è¦†ç›–ç‡ >= 85%

- [ ] **M5**: å‘å¸ƒ v1.0 (Week 11)
  - ç”Ÿäº§å°±ç»ª

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### å¼€å‘è§„èŒƒ

1. æ‰€æœ‰ä»£ç å¿…é¡»æœ‰å•å…ƒæµ‹è¯•
2. æ‰€æœ‰å¯¼å‡ºå‡½æ•°å¿…é¡»æœ‰æ–‡æ¡£æ³¨é‡Š
3. ä½¿ç”¨ `gofmt` æ ¼å¼åŒ–ä»£ç 
4. æäº¤å‰è¿è¡Œ `make lint-tui`
5. éµå¾ª Go å‘½åçº¦å®š

### æµ‹è¯•è§„èŒƒ

1. æµ‹è¯•æ–‡ä»¶å‘½å: `*_test.go`
2. æµ‹è¯•å‡½æ•°å‘½å: `TestXxx`
3. åŸºå‡†æµ‹è¯•å‘½å: `BenchmarkXxx`
4. ä½¿ç”¨ testify æ–­è¨€åº“
5. ä½¿ç”¨ table-driven tests

### æäº¤è§„èŒƒ

1. æäº¤ä¿¡æ¯æ ¼å¼: `type(scope): message`
2. ç±»å‹: feat / fix / docs / test / refactor
3. ç¤ºä¾‹: `feat(tui): add table component`

---

**æœ€åæ›´æ–°**: 2026-01-16  
**è´Ÿè´£äºº**: Yao TUI Team  
**é¢„è®¡å®Œæˆ**: 2026-04-01
