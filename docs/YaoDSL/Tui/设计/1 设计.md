# TUI 设计

给yao增加新的TUI界面，主作用于在终端上显示数据，并提供交互功能。yao引擎本身有Process处理器调用机制，可以方便process处理器来调用外部接口获取/写入数据。

使用Bubble Tea作为TUI框架，参考[Bubble Tea](https://github.com/charmbracelet/bubbletea)

使用Json配置文件来描述TUI界面与交互，JSON描述UI结构，行为意图。

应用端：

- tuis/<tui_id>.tui.yao
  可以有多个配置文件，每一个配置文件对应一个TUI界面。

JSON配置文件保存在应用目录tuis/下，后缀名为.tui.yao/.tui.json/.tui.jsonc,

在应用启动时加载tuis/目录下的所有配置文件，并根据文件路径，文件名转换成TUI的ID，TUI ID作为TUI的唯一标识,保存到全局缓存中。

文件加载与，ID转换，缓存处理逻辑可以参考：pipe\pipe.go，

加载配置文件，可以通过TUI的ID来获取TUI的配置文件。

tui引擎：- types.go 定义TUI结构、TUI配置结构 - tui.go tui配置加载解析，- 不同tui界面使用不同的tui id来引用，比如main.tui.yao，login.tui.yao,在main.tui.yao中引用login.tui.yao使用 tui_id: login来引用。- 需要考虑是否使用主页面，组件，子页面，子组件的概念，来描述TUI界面，防止单一界面过大。- 需要按json配置中的意图来处理事件。- 外部数据读取，触发外部事件调用外部接口统一使用yao process处理器，Process.Of('process_name',args) - 状态数据自动的从上级组件传递给子组件，子组件可以通过状态数据来渲染界面，类似于绑定数据，比如可以在配置文件中使用`{{}}`来绑定状态数据，可以参考pipe\pipe.go中使用expression来解析。

界面渲染：- 参考cmd/sui,创建单独调用tui的命令，比如yao tui login '::{"username":"admin","password":"<PASSWORD>"}' 来调用login tui界面

这是一份设计稿，结合yao项目，完善设计文档，如果有考虑不周的地方，给出建议。目标是设计出一个由配置文件驱动的TUI界面，可以方便的在终端上显示数据，并提供交互功能。
